var base_url = "http://127.0.0.1/bengkel%20ikan";
$(function () {
    $("#select").select2();
});
function tampilkanPreview(gambar,idpreview){
    var gb = gambar.files;
    
    for (var i = 0; i < gb.length; i++){
        var gbPreview = gb[i];
        var imageType = /image.*/;
        var preview=document.getElementById(idpreview);            
        var reader = new FileReader();
        
        if (gbPreview.type.match(imageType)) {
            preview.file = gbPreview;
            reader.onload = (function(element) { 
                return function(e) { 
                    element.src = e.target.result; 
                }; 
            })(preview);

            reader.readAsDataURL(gbPreview);
        }else{
            alert("Type file tidak sesuai. Khusus image.");
        }
    }    
}

/*Pilih Ikan Gizi*/
$(document).ready(function(){
     $("#loading").hide();
    $(".pilih-ikan").change(function(){
        $("#loading").show();
        var strcari = $(".pilih-ikan").val();
        if(strcari != ""){
            setTimeout(function(){
                $.ajax({
                    type:"post",
                    url:base_url+"/pages/user/modul/gizi.php",
                    data:"kdikan="+ strcari,
                    success: function(data){
                        $("#loading").hide();
                        $(".tempat-gizi").html(data);
                    }
                });
            });
        }else{
            setTimeout(function(){
                $.ajax({
                    url:base_url+"/pages/user/modul/gizi-empty.php",
                    success: function(data){
                        $(".tempat-gizi").html(data);
                    },
                });
            });
        }
    });
});

$(document).ready(function(){
    $(".pilih-jenis").change(function(){
        var strcari = $(".pilih-jenis").val();
        if(strcari != ""){
            setTimeout(function(){
                $.ajax({
                    type:"post",
                    url:base_url+"/pages/user/modul/ikan.php",
                    data:"kdjenisikan="+ strcari,
                    success: function(data){
                        $(".tempat-ikan").html(data);
                    }
                });
            });
        }else{
            setTimeout(function(){
                $.ajax({
                    url:base_url+"/pages/user/modul/ikan-empty.php",
                    success: function(data){
                        $(".tempat-ikan").html(data);
                    },
                });
            });
        }
    });
});

/*pilih kelurahan dari kecamatan*/
$(document).ready(function(){
    $(".pilih-kecamatan-dicheckout").change(function(){
        var strcari = $(".pilih-kecamatan-dicheckout").val();
        if(strcari != ""){
            setTimeout(function(){
                $.ajax({
                    type:"post",
                    url:base_url+"/pages/checkout/modul/kelurahan.php",
                    data:"kodeKecamatan="+ strcari,
                    success: function(data){
                        $(".tempat-kelurahan").html(data);
                    }
                });
            });
        }else{
            setTimeout(function(){
                $.ajax({
                    url:base_url+"/pages/checkout/modul/kelurahan-empty.php",
                    success: function(data){
                        $(".tempat-kelurahan").html(data);
                    },
                });
            });
        }
    });
});


/*Navbar*/
/*$(document).ready(function($) {
  $(window).scroll(function(){
    setTimeout(function() { 
      var scroll = $(window).scrollTop();
      console.log(scroll);
      if (scroll < 625) {
        $("#menutengah").removeClass("fixed-top");
      }else if (scroll > 625) {
        $("#menutengah").addClass("fixed-top");
      }
    },0);
  });
});*/

// Select all links with hashes
$('a[href*="#review"]')
// Remove links that don't actually link to anything
.click(function(event) {
  // On-page links
  if (
    location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') 
    && 
    location.hostname == this.hostname
  ) {
    // Figure out element to scroll to
    var target = $(this.hash);
    target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
    // Does a scroll target exist?
    if (target.length) {
      // Only prevent default if animation is actually gonna happen
      event.preventDefault();
      $('html, body').animate({
        scrollTop: target.offset().top
      }, 1000, function() {
        // Callback after animation
        // Must change focus!
        var $target = $(target);
        $target.focus();
        if ($target.is(":focus")) { // Checking if the target was focused
          return false;
        } else {
          $target.attr('tabindex','-1'); // Adding tabindex for elements not focusable
          $target.focus(); // Set focus again
        };
      });
    }
  }
});
/*Navbar*/
new WOW().init();